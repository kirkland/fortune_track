%h1 Accounts

%p
  - if @show_all
    = link_to 'hide empty', accounts_path
    &mdash;
    show all
  - else
    hide empty
    &mdash;
    = link_to 'show all', accounts_path(show_all: true)

#accounts
  .account_group.account_row.header
    .name Account
    .debit Debit
    .credit Credit

  - @accounts.order(:sort_order).each do |account|
    - if show_account?(account)
      = render account

.clear
%p{style: 'margin-top: 30px'}=link_to 'New Account', new_account_path

-content_for :ready_js do
  :plain
    shadeEveryOtherRow();

    $('.toggler').click(function(event) {
      $(event.target).closest('.account_group').toggleClass('hide_children');
      shadeEveryOtherRow();
      return false;
    });
